<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="address">

	<typeAlias alias="address" type="com.wang.green.domain.Address" />
		<resultMap class="address" id="address">
		<result property="id" column="id" />
		<result property="address" column="address" />
		<result property="detailAddress" column="detail_address" />
		<result property="zipcode" column="zipcode" />
		<result property="isdefault" column="isdefault" />
		<result property="userId" column="user_id" />
		</resultMap>

	<sql id="addressSql">
		id,address,detail_address,zipcode,isdefault,user_id
	</sql>

	<select id="findAll" resultMap="address">
		select * from address
	</select>
	
	<select id="findByUserId" parameterClass="int" resultMap="address">
		select * from address where user_id=#userId#
	</select>
	
	<insert id="add" parameterClass="address">
		insert into address(address,detail_address,zipcode,isdefault,user_id)
		values (#address#,#detailAddress#,#zipcode#,#isdefault#,#userId#)
	</insert>
	
	<update id="update" parameterClass="address">
		update address set
		<dynamic>
			<isNotNull prepend="," property="address">#address#</isNotNull>
			<isNotNull prepend="," property="detailAddress">#detailAddress#</isNotNull>
			<isNotNull prepend="," property="zipcode">#zipcode#</isNotNull>
			<isNotNull prepend="," property="isdefault">#isdefault#</isNotNull> 
			<isNotNull prepend="," property="userId">#userId#</isNotNull>
		</dynamic>
		where id=#id#
	</update>
	

</sqlMap>
